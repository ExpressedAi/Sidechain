(()=>{let e;(()=>{const t="__app_hrp",r="production",n=!1;if(e=globalThis[t],e)return;const i={name:t,env:r,get:e=>e in i?i[e]:null,...JSON.parse('{"version":"9.2.1"}')},o=function e(t){const r=t===i,o=r&&n,a={},c=e=>Object.assign(t,e),h=new Proxy(t,{get(n,i){if("assign"===i)return c;if(r&&!String(i).startsWith("$"))return t[i];if(!(i in t)){if(t[i]={},r){const e=s.bind(null,"log",i,!1),r=s.bind(null,"log",i,!0),n=s.bind(null,"warn",i,!1),o=s.bind(null,"warn",i,!0),a=s.bind(null,"error",i,!1),c=s.bind(null,"error",i,!0),h=l.bind(null,i);Object.defineProperties(t[i],{log:{get:()=>e},logDev:{get:()=>r},warn:{get:()=>n},warnDev:{get:()=>o},error:{get:()=>a},errorDev:{get:()=>c},Error:{get:()=>h}})}a[i]=e(t[i]),o&&(globalThis[i]=t[i])}return i in a?a[i]:t[i]},set:(e,r,n)=>(t[r]=n,a[r]=n,o&&(globalThis[r]=t[r]),!0)});return h}(i);function s(e,t,r,...n){if(r)return;const[i,o,s]=function(e){let t=0;e.split("").forEach(((r,n)=>{t=e.charCodeAt(n)+((t<<5)-t)}));return[(16711680&t)>>16,(65280&t)>>8,255&t]}(t);console[e](`%c[${t}]`,`color: rgb(${i}, ${o}, ${s})`,...n)}function l(e,t,...r){return r.length>0&&s("error",e,!1,t,...r),new Error(`[${e}] ${t}`)}globalThis[t]=o,e=o})(),(()=>{const{$critical:t}=e;t.isAutomatable=e=>{if(e="string"==typeof e?e:e?.url)try{const t=new URL(e);return!!["http:","https:"].includes(t.protocol)&&(!["chrome.google.com"].includes(t.host)&&(!["chromewebstore.google.com"].includes(t.host)&&!t.href.startsWith("https://harpa.ai/automation")))}catch(e){return!1}}})(),(()=>{const{$critical:t}=e;t.proxy={get pageType(){return void 0!==this._pageType||(this._pageType="chrome-extension:"!==location.protocol?null:location.search.includes("?sandbox")?"sandbox":location.search.includes("?popup")?"popup":location.search.includes("?shell-header")?"shell-header":location.search.includes("?shell-error")?"shell-error":location.search.includes("?shell-new-tab")?"shell-new-tab":location.search.includes("?shell-omnibox")?"shell-omnibox":location.search.includes("?shell-find")?"shell-find":"popup"),this._pageType},get tabId(){return this._chromeTabId||null},set tabId(e){this._chromeTabId=e},get taskId(){return new URLSearchParams(location.search).get("task-id")}}})(),(()=>{const{$critical:t,$utils:r}=e;t.controller={async init(){this._readyPromise=r.createPromise(),this.setupCriticalStyles(),this.updatePageTitle(),this.updateFavicon(),await this.updateTabId(),this._readyPromise.resolve()},async waitForReady(){await this._readyPromise},get pageType(){return t.proxy.pageType},shouldUseSystemTheme(){return"shell-find"===this.pageType||"shell-header"===this.pageType||"shell-omnibox"===this.pageType},setupCriticalStyles(){const e=new URL(location.href).searchParams.get("bgColor");if(e)this.addStyle(`html { background: ${e} !important; }`);else{const e=this.getTheme();e&&document.querySelector("html").classList.add(`theme-${e}`)}},updatePageTitle(){document.title=this.getPageTitle()},updateFavicon(){const e=this.getFavicon();document.querySelector('link[rel="icon"]').setAttribute("href",e)},updateTabId:async()=>new Promise((e=>{chrome.tabs.getCurrent((r=>(r=>{t.proxy.tabId=r.id,e()})(r)))})),getPageTitle(){return"sandbox"===this.pageType?"HARPA AI | Sandbox":"shell-new-tab"===this.pageType?"New Tab":"HARPA AI | Browser's Mind"},getFavicon(){if("sandbox"===this.pageType)return"/img/misc/sandbox.png";if("shell-new-tab"===this.pageType){return`/img/icons/icon-128-${"night"===this.getSystemTheme()?"light":"dark"}.png`}return"/img/icons/icon-128.png"},addStyle(e){const t=document.createElement("style");t.setAttribute("critical",""),t.textContent=e,document.head.insertAdjacentElement("afterbegin",t)},getTheme(){if(this.shouldUseSystemTheme())return this.getSystemTheme();try{return localStorage.getItem("ui-theme")}catch(e){return this.getSystemTheme()}},getSystemTheme(){const e=window?.matchMedia;return e&&e("(prefers-color-scheme: dark)").matches?"night":"day"}}})(),(()=>{const{$utils:t}=e;t.createPromise=()=>{let e=null,t=null;const r=new Promise(((r,n)=>{e=r,t=n}));return Object.defineProperty(r,"resolve",{get:()=>e}),Object.defineProperty(r,"reject",{get:()=>t}),r}})(),(()=>{const{$startup:t,$critical:r}=e;t.criticalController={init(){r.controller.init()}},t.criticalController.init()})()})();